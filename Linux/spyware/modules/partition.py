from dataclasses import dataclass
import psutil

@dataclass
class Partition:
    device: str = None
    total: int = None
    used: int = None
    free: int = None
    percentage: float = None

    @classmethod
    def from_device(cls, device_path: str):
        usage = psutil.disk_usage(device_path)
        return cls(
            device=device_path,
            total=usage.total,
            used=usage.used,
            free=usage.free,
            percentage=usage.percent
        )

    def __str__(self):
        return{
            f"Device: {self.device}, Total: {self.total / (1024**3):.2f} GB, "
            f"Used: {self.used / (1024**3):.2f} GB, "
            f"Free: {self.free / (1024**3):.2f} GB, "
            f"Percentage: {self.percentage}%"
        }